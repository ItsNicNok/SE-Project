!function(e){var t=["uael","uael_section","uael_column","uael_container"],n=["widget","column","section","container"];xsLocalStorage.init({iframeUrl:uael_cross_domain.cross_domain_cdn,initCallback:function(){}}),UAE_Cross_Domain_Handler={paste:function(e,t){var n=null,a={index:0},o=e.widgetCode,i=JSON.stringify(o),r=o.elType,s=/\.(jpg|png|jpeg|gif|svg)/gi.test(i),c={elType:r,settings:o.settings},l=t,d=t.model.get("elType");switch(r){case"section":case"container":switch(c.elements=UAE_Cross_Domain_Handler.generateUniqueID(o.elements),n=elementor.getPreviewContainer(),d){case"widget":a.index=l.getContainer().parent.parent.view.getOption("_index")+1;break;case"column":a.index=l.getContainer().parent.view.getOption("_index")+1;break;case"section":a.index=l.getOption("_index")+1}break;case"column":switch(c.elements=UAE_Cross_Domain_Handler.generateUniqueID(o.elements),d){case"widget":n=l.getContainer().parent.parent,a.index=l.getContainer().parent.view.getOption("_index")+1;break;case"column":n=l.getContainer().parent,a.index=l.getOption("_index")+1;break;case"section":n=l.getContainer()}break;case"widget":switch(c.widgetType=o.widgetType,n=l.getContainer(),d){case"widget":n=l.getContainer().parent,a.index=l.getOption("_index")+1;break;case"column":n=l.getContainer();break;case"section":n=l.children.findByIndex(0).getContainer()}}var u=$e.run("document/elements/create",{model:c,container:n,options:a});void 0==u&&("widget"===d?l.$el.next(".undefined.elementor-widget-empty")&&l.$el.next(".undefined.elementor-widget-empty").after('<div class="elementor-alert elementor-alert-warning">'+uael_cross_domain.widget_not_found+"</div>"):l.$el.find(".undefined.elementor-widget-empty")&&l.$el.find(".undefined.elementor-widget-empty").after('<div class="elementor-alert elementor-alert-warning">'+uael_cross_domain.widget_not_found+"</div>")),s&&jQuery.ajax({url:uael_cross_domain.ajaxURL,method:"POST",data:{nonce:uael_cross_domain.nonce,action:"uael_process_import",content:i},beforeSend:function(){u.view.$el.addClass("uael-processing-import")}}).done(function(e){if(e.success){var t=e.data[0];c.elType=t.elType,c.settings=t.settings,"widget"===c.elType?c.widgetType=t.widgetType:c.elements=t.elements,$e.run("document/elements/delete",{container:u}),$e.run("document/elements/create",{model:c,container:n,options:a})}})},generateUniqueID:function(e){return e.forEach(function(e,t){void 0!==elementorCommon.helpers.getUniqueId()?e.id=elementorCommon.helpers.getUniqueId():e.id=elementor.helpers.getUniqueID(),e.elements.length>0&&UAE_Cross_Domain_Handler.generateUniqueID(e.elements)}),e},getData:function(e,t){var n=JSON.stringify(e);jQuery.ajax({url:uael_cross_domain.ajaxURL,method:"POST",data:{action:"uael_process_import",nonce:uael_cross_domain.nonce,content:n},beforeSend:function(){t.attr("data-uael-fpcp-text","Pasting the content...")}}).done(function(e){if(e.success){t.attr("data-uael-fpcp-text","Processing the content...");var n=e.data[0];uael_cross_domain.elementorCompatible?elementor.sections.currentView.addChildModel(n):elementor.previewView.addChildModel(n),t.attr("data-uael-fpcp-text","Processing Completed");var a=setTimeout(function(){t.removeClass("uael-fpcp-wait"),"uael-icon-uae"==uael_cross_domain.cross_domain_icon&&t.find("body").removeClass("uael-fpcp-wait__icon"),elementor.notifications.showToast({message:elementor.translate("Entire Page Content Is Pasted!")}),clearTimeout(a)},60)}}).fail(function(){t.attr("data-uael-fpcp-text",""),t.removeClass("uael-fpcp-wait"),"uael-icon-uae"==uael_cross_domain.cross_domain_icon&&t.find("body").removeClass("uael-fpcp-wait__icon"),elementor.notifications.showToast({message:elementor.translate("Something went wrong!")})})},isValidJson:function(e){try{return JSON.parse(e),!0}catch(e){return!1}}},t.forEach(function(e,a){elementor.hooks.addFilter("elements/"+n[a]+"/contextMenuGroups",function(e,n){return e.push({name:t[a],actions:[{name:"copy",title:uael_cross_domain.uae_copy,icon:uael_cross_domain.cross_domain_icon,callback:function(){var e={widgetType:n.model.get("widgetType"),widgetCode:n.model.toJSON()};xsLocalStorage.setItem("bsf_uael_container_new",JSON.stringify(e));var t=document.createElement("textarea");t.value=JSON.stringify(e),document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}},{name:"paste",title:uael_cross_domain.uae_paste,icon:uael_cross_domain.cross_domain_icon,callback:function(){if(navigator.clipboard)navigator.clipboard.readText().then(function(e){if(UAE_Cross_Domain_Handler.isValidJson(e)){var t=JSON.parse(e);e&&"object"==typeof t&&(xsLocalStorage.setItem("bsf_uael_container_new",e),UAE_Cross_Domain_Handler.paste(t,n))}}).catch(function(e){console.error("Error clipboard data: "+e)});else{var e=document.getElementById("uae-paste-area-dialog");if(e&&e.parentNode.removeChild(e),!document.querySelector("#uae-paste-area-input")){var t=document.createElement("div"),a=document.createElement("p");a.innerHTML="Please grant clipboard permission for this site to paste.";var o=document.createElement("input");o.id="uae-paste-area-input",o.type="text",o.setAttribute("autocomplete","off"),o.setAttribute("autofocus","autofocus"),o.focus(),t.appendChild(a),t.appendChild(o),o.addEventListener("paste",async function(e){e.preventDefault();var t=e.clipboardData.getData("text");if(UAE_Cross_Domain_Handler.isValidJson(t)){var a=JSON.parse(t);t&&"object"==typeof a&&(xsLocalStorage.setItem("bsf_uael_container_new",t),UAE_Cross_Domain_Handler.paste(a,n))}var o=document.getElementById("uae-paste-area-dialog");o&&o.parentNode.removeChild(o)});let e="";e=-1!=navigator.userAgent.indexOf("Mac OS X")?"Command":"Ctrl";var i=elementorCommon.dialogsManager.createWidget("lightbox",{id:"uae-paste-area-dialog",headerMessage:`${e} + V`,message:t,position:{my:"center center",at:"center center"},onShow:function(){o.focus(),i.getElements("widgetContent").on("click",function(){o.focus()})},closeButton:!0,closeButtonOptions:{iconClass:"eicon-close"}});i.show()}}}},{name:"copy_all",title:uael_cross_domain.uae_copy_all,icon:uael_cross_domain.cross_domain_icon,callback:function(){var e=Object.values(elementor.getPreviewView().children._views).map(function(e){return e.getContainer()}).map(function(e){return e.model.toJSON()});xsLocalStorage.setItem("bsf_uael_all_sections",JSON.stringify(e),function(e){elementor.notifications.showToast({message:elementor.translate("Entire Page Content Is Copied!")})});var t=document.createElement("textarea");t.value=JSON.stringify(e),document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}},{name:"paste_all",title:uael_cross_domain.uae_paste_all,icon:uael_cross_domain.cross_domain_icon,callback:function(){var e=elementor.$previewContents.find("html");if(navigator.clipboard)navigator.clipboard.readText().then(function(t){if(UAE_Cross_Domain_Handler.isValidJson(t)){var n=JSON.parse(t);t&&"object"==typeof n&&(xsLocalStorage.setItem("bsf_uael_all_sections",t),e.addClass("uael-fpcp-wait").attr("data-uael-fpcp-text","Starting the process..."),"uael-icon-uae"==uael_cross_domain.cross_domain_icon&&e.find("body").addClass("uael-fpcp-wait__icon"),UAE_Cross_Domain_Handler.getData(n,e))}}).catch(function(e){console.error("Error clipboard data: "+e)});else{var t=document.getElementById("uae-paste-area-dialog");if(t&&t.parentNode.removeChild(t),!document.querySelector("#uae-paste-area-input")){var a=document.createElement("div"),o=document.createElement("p");o.innerHTML="Please grant clipboard permission for this site to paste.";var i=document.createElement("input");i.id="uae-paste-area-input",i.type="text",i.setAttribute("autocomplete","off"),i.setAttribute("autofocus","autofocus"),i.focus(),a.appendChild(o),a.appendChild(i),i.addEventListener("paste",async function(e){e.preventDefault();var t=e.clipboardData.getData("text");if(UAE_Cross_Domain_Handler.isValidJson(t)){var a=JSON.parse(t);t&&"object"==typeof a&&(xsLocalStorage.setItem("bsf_uael_all_sections",t),UAE_Cross_Domain_Handler.getData(a,n))}var o=document.getElementById("uae-paste-area-dialog");o&&o.parentNode.removeChild(o)});let e="";e=-1!=navigator.userAgent.indexOf("Mac OS X")?"Command":"Ctrl";var r=elementorCommon.dialogsManager.createWidget("lightbox",{id:"uae-paste-area-dialog",headerMessage:`${e} + V`,message:a,position:{my:"center center",at:"center center"},onShow:function(){i.focus(),r.getElements("widgetContent").on("click",function(){i.focus()})},closeButton:!0,closeButtonOptions:{iconClass:"eicon-close"}});r.show()}}}}]}),e})})}(jQuery);